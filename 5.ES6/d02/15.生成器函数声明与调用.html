<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>生成器函数声明与调用</title>
</head>
<body>
  
</body>
<script>
  
  /*------------------------ 生成器函数声明与调用 --------------------------*/

  // 生成器其实就是一个特殊的函数
  // 异步编程 纯回调函数 
  // 函数代码的分隔符 yield

  // function * gen() {
  //   yield '一只没有耳朵';
  //   yield '一只没有尾巴';
  //   yield '真奇怪';
  // }
  // console.log(gen())

  // // let iterator = gen();
  // // console.log(iterator.next());
  // // console.log(iterator.next());
  // // console.log(iterator.next());
  // // console.log(iterator.next());

  // for(let v of gen()) {
  //   console.log(v)
  // }

  /*------------------------- 生成器函数参数 ---------------------------*/ 

  // function * gen(param) {
  //   console.log(param)  // 只有调用了第一个next()才会输出
  //   let one = yield 111;
  //   console.log('one ' + one) // BBB
  //   let two = yield 222;
  //   console.log('two ' + two) // CCC
  //   let three = yield 333;
  //   console.log('three ' + three) // DDD
  // }

  // // 执行获取迭代器对象
  // let iterator = gen('AAA');
  // console.log(iterator.next())
  // // next方法可以传入实参 传入的实参是yield语句返回的结果
  // console.log(iterator.next('BBB'))
  // console.log(iterator.next('CCC'))
  // console.log(iterator.next('DDD'))



  /*---------------------- 生成器函数实例 ------------------------*/

  // 1s后控制台输出111  再2s后输出222  再3s后输出 333
  // 用setTimeout套setTimeout... 会出现回调地狱  

  // function one() {
  //   setTimeout(()=>{
  //     console.log(111)
  //     iterator.next();
  //   }, 1000) 
  // }

  // function two() {
  //   setTimeout(()=>{
  //     console.log(222)
  //     iterator.next();
  //   }, 2000)
  // }

  // function three() {
  //   setTimeout(()=>{
  //     console.log(333)
  //     iterator.next();
  //   }, 3000)
  // }

  // function * gen() {
  //   yield this.one();
  //   yield this.two();
  //   yield this.three();
  // }

  // let iterator = gen();
  // iterator.next();


  // 模拟获取 用户数据 --> 订单数据 --> 商品数据

  function getUsers() {
    setTimeout(()=>{
      let data = '用户数据'
      iterator.next(data);
    }, 1000)
  }

  function getOrders() {
    setTimeout(()=>{
      let data = '订单数据'
      iterator.next(data);
    }, 1000)
  }

  function getGoods() {
    setTimeout(()=>{
      let data = '商品数据'
      iterator.next(data);
    }, 1000)
  }

  function * gen() {
    let users = yield getUsers();
    console.log(users);
    let orders = yield getOrders();
    console.log(orders)
    let goods = yield getGoods();
    console.log(goods)
  }

  let iterator = gen();
  iterator.next();
</script>
</html>